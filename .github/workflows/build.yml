name: Compile Legacy Place Convertor

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    # Use a Windows runner since this is a .NET desktop application
    runs-on: windows-latest 

    steps:
    - uses: actions/checkout@v4
      # Step 1: Downloads your code. Essential!

    - name: Setup MSBuild and .NET Framework
      # Step 2: Configures the build environment
      uses: microsoft/setup-msbuild@v2

    - name: Build Application
      # Step 3: Compiles your solution using the correct path.
      run: msbuild "Notedsite/legacy-place-converter/Roblox Legacy Place Convertor.sln" /t:Rebuild /p:Configuration=Release

    - name: Upload Compiled Executable
      # Step 4: Packages the output (.exe and .dlls) for you to download
      uses: actions/upload-artifact@v4
      with:
        name: Legacy-Place-Convertor-EXE
        path: |
          # This glob pattern finds the output files inside the 'Release' folders:
          **\bin\Release\*.exe
          **\bin\Release\*.dll
